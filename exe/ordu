#!/usr/bin/env ruby
# frozen_string_literal: true

require 'ordu'
require 'ordu/version'

# An ordu program which can be used to create ordu programs from the
# command-line. It also serves as a nice example of how to write a program
# with ordu.
Ordu.new do
  name 'ordu'

  version Ordu::VERSION

  summary 'Generate a new command-line application'

  desc <<-DESC
  Generates a new command-line application based on Ordu.
  DESC

  on '-n', '--dry-run', 'just print what would be output'
  on '-G', '--gemspec', 'create a gemspec'
  on '-B', '--bundler', 'create a Gemfile'
  on '-R', '--rakefile', 'create a Rakefile'
  on '-D', '--dockerfile', 'create a Dockerfile'
  on '-A', '--application', 'same as -BGSD' do
    set(:G, true) unless get(:'no-gemspec')
    set(:B, true) unless get(:'no-gemfile')
    set(:R, true) unless get(:'no-rakefile')
    set(:D, true) unless get(:'no-dockerfile')
  end

  arg 'NAME', String, 'the name of the program to be generated', :REQUIRED

  action :run

  # Business logic follows:

  $PROGRAM_NAME == __FILE__ && parse!(ARGV)
end
